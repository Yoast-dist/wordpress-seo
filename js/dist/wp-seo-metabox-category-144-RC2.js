(window.yoastWebpackJsonp=window.yoastWebpackJsonp||[]).push([[18],{0:function(e,t){e.exports=window.wp.i18n},1:function(e,t){e.exports=window.lodash},10:function(e,t){e.exports=window.wp.data},11:function(e,t){e.exports=window.wp.url},2:function(e,t,n){e.exports=n(39)()},243:function(e,t){e.exports=window.wp.apiFetch},26:function(e,t){e.exports=window.wp.compose},3:function(e,t){e.exports=React},38:function(e,t,n){"use strict";var r=n(1);t.a=(()=>!Object(r.isNil)(window.wp)&&!Object(r.isNil)(wp.data)&&!Object(r.isNil)(wp.data.select("core/edit-post"))&&!Object(r.isNil)(wp.data.select("core/editor"))&&Object(r.isFunction)(wp.data.select("core/editor").getEditedPostAttribute))},39:function(e,t,n){"use strict";var r=n(40),s=n(41),o=n(42);e.exports=function(){function e(e,t,n,r,a,i){i!==o&&s(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},4:function(e,t){e.exports=window.wp.element},40:function(e,t,n){"use strict";function r(e){return function(){return e}}var s=function(){};s.thatReturns=r,s.thatReturnsFalse=r(!1),s.thatReturnsTrue=r(!0),s.thatReturnsNull=r(null),s.thatReturnsThis=function(){return this},s.thatReturnsArgument=function(e){return e},e.exports=s},41:function(e,t,n){"use strict";var r=function(e){};e.exports=function(e,t,n,s,o,a,i,c){if(r(t),!e){var p;if(void 0===t)p=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,s,o,a,i,c],m=0;(p=new Error(t.replace(/%s/g,function(){return l[m++]}))).name="Invariant Violation"}throw p.framesToPop=1,p}}},412:function(e,t,n){"use strict";n.r(t);var r=n(10),s=n(4),o=n(1),a=n(3),i=n.n(a),c=n(2),p=n.n(c),l=n(0),m=n(9),d=n(6),u=n.n(d),h=n(26),y=n(243),f=n.n(y),w=n(11);const g=u.a.div.withConfig({displayName:"TaxonomyPicker__SelectContainer",componentId:"indmtn-0"})(["padding-top:6px;"]),b=e=>{const{value:t,id:n,terms:r,onChange:s}=e;return wp.element.createElement(g,null,wp.element.createElement("select",{className:"components-select-control__input",id:n,value:t,onChange:e=>{s(parseInt(e.target.value,10))}},r.map(e=>wp.element.createElement("option",{key:e.id,value:e.id},Object(o.unescape)(e.name)))))};b.propTypes={terms:p.a.arrayOf(p.a.shape({id:p.a.string.isRequired,name:p.a.string.isRequired})),onChange:p.a.func.isRequired,id:p.a.string,value:p.a.string};var x=b;const T=u.a.div.withConfig({displayName:"PrimaryTaxonomyPicker__PrimaryTaxonomyPickerField",componentId:"sc-90k7iy-0"})(["padding-top:16px;"]);class v extends i.a.Component{constructor(e){super(e),this.onChange=this.onChange.bind(this),this.updateReplacementVariable=this.updateReplacementVariable.bind(this);const{fieldId:t,name:n}=e.taxonomy;this.input=document.getElementById(t),e.setPrimaryTaxonomyId(n,parseInt(this.input.value,10)),this.state={selectedTerms:[],terms:[]}}componentDidMount(){this.fetchTerms()}componentDidUpdate(e,t){if(e.selectedTermIds.length<this.props.selectedTermIds.length){const t=Object(o.difference)(this.props.selectedTermIds,e.selectedTermIds)[0];if(!this.termIsAvailable(t))return void this.fetchTerms()}e.selectedTermIds!==this.props.selectedTermIds&&this.updateSelectedTerms(this.state.terms,this.props.selectedTermIds),t.selectedTerms!==this.state.selectedTerms&&this.handleSelectedTermsChange()}handleSelectedTermsChange(){const{selectedTerms:e}=this.state,{primaryTaxonomyId:t}=this.props;e.find(e=>e.id===t)||this.onChange(e.length?e[0].id:-1)}termIsAvailable(e){return!!this.state.terms.find(t=>t.id===e)}fetchTerms(){const{taxonomy:e}=this.props;e&&(this.fetchRequest=f()({path:Object(w.addQueryArgs)(`/wp/v2/${e.restBase}`,{per_page:-1,orderby:"count",order:"desc",_fields:"id,name"})}),this.fetchRequest.then(e=>{const t=this.state;this.setState({terms:e,selectedTerms:this.getSelectedTerms(e,this.props.selectedTermIds)},()=>{0===t.terms.length&&this.state.terms.length>0&&this.updateReplacementVariable(this.props.primaryTaxonomyId)})}))}getSelectedTerms(e,t){return e.filter(e=>t.includes(e.id))}updateSelectedTerms(e,t){const n=this.getSelectedTerms(e,t);this.setState({selectedTerms:n})}onChange(e){const{name:t}=this.props.taxonomy;this.updateReplacementVariable(e),this.props.setPrimaryTaxonomyId(t,e),this.input.value=-1===e?"":e}updateReplacementVariable(e){if("category"!==this.props.taxonomy.name)return;const t=this.state.selectedTerms.find(t=>t.id===e);this.props.updateReplacementVariable(`primary_${this.props.taxonomy.name}`,t?t.name:"")}render(){const{primaryTaxonomyId:e,taxonomy:t}=this.props;if(this.state.selectedTerms.length<2)return null;const n=`yoast-primary-${t.name}-picker`;return wp.element.createElement(T,{className:"components-base-control__field"},wp.element.createElement("label",{htmlFor:n,className:"components-base-control__label"},Object(l.sprintf)(Object(l.__)("Select the primary %s","wordpress-seo"),t.singularLabel.toLowerCase())),wp.element.createElement(x,{value:e,onChange:this.onChange,id:n,terms:this.state.selectedTerms}))}}v.propTypes={selectedTermIds:p.a.arrayOf(p.a.number),primaryTaxonomyId:p.a.number,setPrimaryTaxonomyId:p.a.func,updateReplacementVariable:p.a.func,receiveEntityRecords:p.a.func,taxonomy:p.a.shape({name:p.a.string,fieldId:p.a.string,restBase:p.a.string,singularLabel:p.a.string})};var O=Object(h.compose)([Object(r.withSelect)((e,t)=>{const n=e("core/editor"),r=e("yoast-seo/editor"),{taxonomy:s}=t;return{selectedTermIds:n.getEditedPostAttribute(s.restBase)||[],primaryTaxonomyId:r.getPrimaryTaxonomyId(s.name)}}),Object(r.withDispatch)(e=>{const{setPrimaryTaxonomyId:t,updateReplacementVariable:n}=e("yoast-seo/editor");return{setPrimaryTaxonomyId:t,updateReplacementVariable:n}})])(v);let C=null,I=null;const k=u.a.div.withConfig({displayName:"PrimaryTaxonomyFilter__ErrorContainer",componentId:"sc-15n7j5b-0"})(["margin:16px 0 8px;"]);class E extends i.a.Component{constructor(){super(),C&&I||(C=Object(o.get)(window.wpseoPrimaryCategoryL10n,"taxonomies",{}),I=Object(o.values)(C).map(e=>e.name)),this.state={exceptionCaught:!1,error:null}}componentDidCatch(e){this.setState({exceptionCaught:!0,error:e})}taxonomyHasPrimaryTermSupport(){return I.includes(this.props.slug)}render(){const{slug:e,OriginalComponent:t}=this.props;if(this.state.exceptionCaught){const e=Object(o.get)(this.state,"error.stack");return wp.element.createElement(s.Fragment,null,wp.element.createElement(t,this.props),wp.element.createElement(k,null,Object(l.sprintf)(Object(l.__)("An error occurred loading the %s primary taxonomy picker.","wordpress-seo"),"Yoast SEO")),e&&wp.element.createElement(m.ClipboardButton,{isLarge:!0,text:e},Object(l.__)("Copy error","wordpress-seo")))}return this.taxonomyHasPrimaryTermSupport()?wp.element.createElement(s.Fragment,null,wp.element.createElement(t,this.props),wp.element.createElement(O,{taxonomy:C[e]})):wp.element.createElement(t,this.props)}}E.propTypes={OriginalComponent:p.a.func.isRequired,slug:p.a.string.isRequired};var P=E,R=n(38);function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const S="yoast-seo";!function(e){var t,n,a=wpseoPrimaryCategoryL10n.taxonomies;function i(t){return e("#yoast-wpseo-primary-"+t).val()}function c(t,n){e("#yoast-wpseo-primary-"+t).val(n).trigger("change");const s=Object(r.dispatch)("yoast-seo/editor");if(s){const r=parseInt(n,10);s.setPrimaryTaxonomyId(t,r),"category"===t&&s.updateReplacementVariable("primary_category",function(t){const n=e("#category-all").find(`#category-${t} > label`);if(0===n.length)return"";const r=n.clone();return r.children().remove(),e.trim(r.text())}(r))}}function p(r){var s,o,c;s=e("#"+r+'checklist input[type="checkbox"]:checked');var p=e("#"+r+"checklist li");p.removeClass("wpseo-term-unchecked wpseo-primary-term wpseo-non-primary-term"),e(".wpseo-primary-category-label").remove(),p.addClass("wpseo-term-unchecked"),s.length<=1||s.each(function(s,p){p=e(p),(o=p.closest("li")).removeClass("wpseo-term-unchecked"),function(t){return 1===e(t).closest("li").children(".wpseo-make-primary-term").length}(p)||function(n,r){var s,o;s=e(r).closest("label"),o=t({taxonomy:a[n],term:s.text()}),s.after(o)}(r,p),p.val()===i(r)?(o.addClass("wpseo-primary-term"),(c=p.closest("label")).find(".wpseo-primary-category-label").remove(),c.append(n({taxonomy:a[r]}))):o.addClass("wpseo-non-primary-term")})}function l(t){c(t,e("#"+t+'checklist input[type="checkbox"]:checked:first').val()),p(t)}function m(e){""===i(e)&&l(e)}e.fn.initYstSEOPrimaryCategory=function(){return this.each(function(t,n){const r=e("#"+n.name+"div");p(n.name),r.on("click",'input[type="checkbox"]',function(t){return function(){!1===e(this).prop("checked")&&e(this).val()===i(t)&&l(t),m(t),p(t)}}(n.name)),r.on("wpListAddEnd","#"+n.name+"checklist",function(e){return function(){m(e),p(e)}}(n.name)),r.on("click",".wpseo-make-primary-term",function(t){return function(n){var r;r=e(n.currentTarget).siblings("label").find("input"),c(t,r.val()),p(t),r.focus()}}(n.name))})},e(function(){t=wp.template("primary-term-ui"),n=wp.template("primary-term-screen-reader"),e(_.values(a)).initYstSEOPrimaryCategory(),function(){if(!Object(R.a)())return;Object(o.get)(window,"wp.hooks.addFilter",o.noop)("editor.PostTaxonomyType",S,e=>(class extends s.Component{render(){return wp.element.createElement(P,j({OriginalComponent:e},this.props))}}))}()})}(jQuery)},42:function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},6:function(e,t){e.exports=window.yoast.styledComponents},9:function(e,t){e.exports=window.wp.components}},[[412,0]]]);